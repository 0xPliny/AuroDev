# os_groups - MHC_GROUPS Table Operations

**Document Version:** 1.0  
**Last Updated:** 2024-12-23  
**Author:** CmL  
**Confidence Score:** 0.95

---

## Document Metadata

| Field | Value |
|-------|-------|
| **Source File** | `os_groups.cpp`, `os_groups.h` |
| **Generated From** | `MHC_GROUPS` table definition in `database_tables.xml` |
| **Location** | `D:\ICIS\AuroDev\clogan\AuroDev\MSVC Programs\osub\` |
| **Table Name** | `MHC_GROUPS` |
| **Primary Key** | `groupname`, `area` (composite) |
| **Generated By** | `p_ut_makdb` utility |
| **Status** | âœ… Generated - DO NOT MODIFY |

---

## Overview

The `MHC_GROUPS` table defines **location groups** for routing and location selection. Groups organize locations by aisle, level, and search criteria to optimize storage and retrieval operations.

**Critical Operations:**
- Group definition and configuration
- Search mode and direction settings
- Location selection optimization

---

## Table Structure

```cpp
typedef struct groups
{
    // Primary Key Fields
    char    groupname[30+1];             // Group name
    char    area[1+1];                  // System area
    
    // Description Fields
    char    description[132+1];         // Group description
    char    grouptype[50+1];             // Group type
    
    // Position Fields
    long    aisle;                       // Aisle number
    long    level;                       // Level number
    
    // Search Configuration Fields
    long    search_mode;                 // Search mode (see GP.GRP.SRCH)
    long    search_direction;            // Search direction (see GP.GRP.DIR)
    long    search_index;                 // Search index
    
    // Control Fields
    bool    internal;                    // Internal group flag
    long    overflow_method;             // Overflow method
    long    stand_mode;                  // Stand mode
    bool    clean_me_up;                 // Clean up flag
    
    // Audit Fields
    char    add_date[24+1];              // Date record was added
    char    add_user[132+1];             // User who added record
    char    modify_date[24+1];           // Date record was last modified
    char    modify_user[132+1];          // User who last modified record
    
    // Internal Fields
    char    GROUPS_dum[2];               // Dummy field (alignment)
    _RecordsetPtr    RsP;                // ADO Recordset pointer (internal use)
} GROUPS;
```

---

## Primary Key

| Field(s) | Type | Description |
|----------|------|-------------|
| `groupname` | `char[31]` | Group name |
| `area` | `char[2]` | System area |

---

## Generated Functions

### GROUPS_select_GROUPS_PR_KEY

**Signature:**
```cpp
long GROUPS_select_GROUPS_PR_KEY(GROUPS *sel, GP_BOOL Update);
```

**Description:**
Selects a single GROUPS record by primary key (`groupname` and `area`).

**SQL Generated:**
```sql
SELECT * FROM MHC_GROUPS WHERE groupname = '{groupname}' AND area = '{area}'
```

---

### GROUPS_select_LOOP

**Signature:**
```cpp
long GROUPS_select_LOOP(GROUPS *sel, long *count, char *where, GP_BOOL Update, int top = 0);
```

**Description:**
Selects multiple GROUPS records using a WHERE clause. Commonly used to find groups by aisle/level.

**Usage Example:**
```cpp
GROUPS groups;
GROUPS_init(&groups);
long count = 0;
char where[256];
sprintf(where, "aisle = %ld AND level = %ld AND area = 'A'", aisle, level);

// Get all groups for aisle/level
while (GROUPS_select_LOOP(&groups, &count, where, GP_FALSE, 0) == GP.GOOD) {
    cs_log_printf(FILELINE, 3, "Group: %s, search_mode=%ld", 
                  groups.groupname, groups.search_mode);
}

count = -1;
GROUPS_select_LOOP(&groups, &count, "", GP_FALSE, 0);
```

---

## Related Tables

| Table | Relationship | Foreign Key |
|-------|--------------|-------------|
| `MHC_LOCATION` | Reference | Locations may belong to groups (via groupname) |

---

## Cross-References

| Topic | Document | Section |
|-------|----------|---------|
| Location Selection | [DSUB Library](../dsub.md) | ds_get_locn uses groups |
| Routing | [os_route.md](os_route.md) | Route uses groups |

---

## Changelog

| Version | Date | Changes |
|---------|------|---------|
| 1.0 | 2024-12-23 | Initial comprehensive documentation |

